values_from = TOTALKBTU,
values_fill = 0
) %>%
rename(
KBTU2019 = "2019",
KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/(KBTU2019)) * 100
)
knitr::opts_chunk$set(echo = TRUE)
pge_rc_bayzips <- as.data.frame.data.frame(pge_rc_bayzips)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
res_pal <- colorNumeric(
palette = "Blues",
domain =
pge_covid$KBTU_change
)
leaflet() %>%
addTiles() %>%
addPolygons(
data = pge_covid,
fillColor = ~res_pal(KBTU_change),
color = "white",
opacity = 0.5,
fillOpacity = 0.5,
weight = 1,
label = ~paste0(
round(KBTU_change),
"KBTU Percentage Change in",
ZIPCODE
),
highlightOptions = highlightOptions(
weight = 2,
opacity = 1
)
) %>%
addLegend(
data = pge_covid,
pal = res_pal,
values = ~KBTU_change,
title = "Percentage Change in Residential Electric Energy Use<br>During COVID-19"
)
library(tidyverse)
library(dplyr)
library(sf)
library(tigris)
library(leaflet)
pge_rc_bayzips$Date <- NULL
pge_rc_bayzips <- as.data.frame.data.frame(pge_rc_bayzips)
pge_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 3:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU,
values_fill = 0
) %>%
rename(
KBTU2019 = "2019",
KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/(KBTU2019)) * 100
library(tidyverse)
library(dplyr)
library(sf)
library(tigris)
library(leaflet)
pge_rc_bayzips$Date <- NULL
pge_rc_bayzips <- as.data.frame.data.frame(pge_rc_bayzips)
pge_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 3:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU,
values_fill = 0
) %>%
rename(
KBTU2019 = "2019",
KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/(KBTU2019)) * 100
)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
res_pal <- colorNumeric(
palette = "Blues",
domain =
pge_covid$KBTU_change
)
leaflet() %>%
addTiles() %>%
addPolygons(
data = pge_covid,
fillColor = ~res_pal(KBTU_change),
color = "white",
opacity = 0.5,
fillOpacity = 0.5,
weight = 1,
label = ~paste0(
round(KBTU_change),
"KBTU Percentage Change in",
ZIPCODE
),
highlightOptions = highlightOptions(
weight = 2,
opacity = 1
)
) %>%
addLegend(
data = pge_covid,
pal = res_pal,
values = ~KBTU_change,
title = "Percentage Change in Residential Electric Energy Use<br>During COVID-19"
)
library(tidyverse)
library(dplyr)
library(sf)
library(tigris)
library(leaflet)
pge_rc_bayzips$Date <- NULL
pge_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 3:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU,
values_fill = 0
) %>%
rename(
KBTU2019 = "2019",
KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/(KBTU2019)) * 100
)
pge_covid <- as.data.frame.data.frame(pge_covid)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
res_pal <- colorNumeric(
palette = "Blues",
domain =
pge_covid$KBTU_change
)
leaflet() %>%
addTiles() %>%
addPolygons(
data = pge_covid,
fillColor = ~res_pal(KBTU_change),
color = "white",
opacity = 0.5,
fillOpacity = 0.5,
weight = 1,
label = ~paste0(
round(KBTU_change),
"KBTU Percentage Change in",
ZIPCODE
),
highlightOptions = highlightOptions(
weight = 2,
opacity = 1
)
) %>%
addLegend(
data = pge_covid,
pal = res_pal,
values = ~KBTU_change,
title = "Percentage Change in Residential Electric Energy Use<br>During COVID-19"
)
pge_covid <- as.data.frame(pge_covid)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
res_pal <- colorNumeric(
palette = "Blues",
domain =
pge_covid$KBTU_change
)
leaflet() %>%
addTiles() %>%
addPolygons(
data = pge_covid,
fillColor = ~res_pal(KBTU_change),
color = "white",
opacity = 0.5,
fillOpacity = 0.5,
weight = 1,
label = ~paste0(
round(KBTU_change),
"KBTU Percentage Change in",
ZIPCODE
),
highlightOptions = highlightOptions(
weight = 2,
opacity = 1
)
) %>%
addLegend(
data = pge_covid,
pal = res_pal,
values = ~KBTU_change,
title = "Percentage Change in Residential Electric Energy Use<br>During COVID-19"
)
pge_covid <- as.data.frame.array(pge_covid)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
res_pal <- colorNumeric(
palette = "Blues",
domain =
pge_covid$KBTU_change
)
leaflet() %>%
addTiles() %>%
addPolygons(
data = pge_covid,
fillColor = ~res_pal(KBTU_change),
color = "white",
opacity = 0.5,
fillOpacity = 0.5,
weight = 1,
label = ~paste0(
round(KBTU_change),
"KBTU Percentage Change in",
ZIPCODE
),
highlightOptions = highlightOptions(
weight = 2,
opacity = 1
)
) %>%
addLegend(
data = pge_covid,
pal = res_pal,
values = ~KBTU_change,
title = "Percentage Change in Residential Electric Energy Use<br>During COVID-19"
)
pge_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 3:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU,
values_fill = 0
) %>%
rename(
KBTU2019 = "2019",
KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/(KBTU2019)) * 100
)
pge_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 3:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU,
values_fill = 0
) %>%
rename(
KBTU2019 = "2019",
KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/(KBTU2019)) * 100
) %>%
st_as_sf()
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
res_pal <- colorNumeric(
palette = "Blues",
domain =
pge_covid$KBTU_change
)
leaflet() %>%
addTiles() %>%
addPolygons(
data = pge_covid,
fillColor = ~res_pal(KBTU_change),
color = "white",
opacity = 0.5,
fillOpacity = 0.5,
weight = 1,
label = ~paste0(
round(KBTU_change),
"KBTU Percentage Change in",
ZIPCODE
),
highlightOptions = highlightOptions(
weight = 2,
opacity = 1
)
) %>%
addLegend(
data = pge_covid,
pal = res_pal,
values = ~KBTU_change,
title = "Percentage Change in Residential Electric Energy Use<br>During COVID-19"
)
pge_bay_chart +
scale_x_continuous(breaks=seq(0,42,2))
library(tidyverse)
library(plotly)
pge_bay_chart <-
pge_bayzips_date %>%
ggplot() +
geom_bar(
aes(
x = DATE %>% factor(),
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "KBTU",
title = "9 Bay Area Counties Monthly Electric & Gas Usage, 2017-2020",
fill = "Energy Type"
)
pge_bay_chart +
theme(axis.text.x = element_text(angle=90, vjust=0.5, hjust=1))
pge_bay_chart +
scale_x_continuous(breaks=seq(0,42,2))
pge_bay_chart +
scale_x_discrete(breaks(0,42,2))
pge_bay_chart +
scale_x_discrete(breaks = seq(0,42,2))
pge_bay_chart %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
pge_bay_chart %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F) %>%
+ scale_x_discrete(breaks = seq(0,42,2))
library(tidyverse)
library(plotly)
pge_bay_chart <-
pge_bayzips_date %>%
ggplot() +
geom_bar(
aes(
x = DATE %>% factor(),
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "KBTU",
title = "9 Bay Area Counties Monthly Electric & Gas Usage, 2017-2020",
fill = "Energy Type"
)
pge_bay_chart +
theme(axis.text.x = element_text(angle=90, vjust=0.5, hjust=1))
pge_bay_chart +
scale_x_discrete(breaks = seq(0,42,2))
pge_bay_chart %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F) %>%
+ scale_x_discrete(breaks = seq(0,42,2))
pge_bay_chart +
theme(axis.text.x = element_text(angle=90, vjust=0.5, hjust=1))
pge_bay_chart +
theme(axis.text.x = element_text(angle=90, vjust=0.5, hjust=1))
library(tidyverse)
library(plotly)
pge_bay_chart <-
pge_bayzips_date %>%
ggplot() +
geom_bar(
aes(
x = DATE %>% factor(),
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "KBTU",
title = "9 Bay Area Counties Monthly Electric & Gas Usage, 2017-2020",
fill = "Energy Type"
)
pge_bay_chart +
theme(axis.text.x = element_text(angle=90, vjust=0.5, hjust=1)) %>%
scale_x_discrete(breaks = seq(0,42,2))
pge_bay_chart %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F) %>%
+ scale_x_discrete(breaks = seq(0,42,2))
library(tidyverse)
library(plotly)
pge_bay_chart <-
pge_bayzips_date %>%
ggplot() +
geom_bar(
aes(
x = DATE %>% factor(),
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "KBTU",
title = "9 Bay Area Counties Monthly Electric & Gas Usage, 2017-2020",
fill = "Energy Type"
)
pge_bay_chart +
scale_x_discrete(breaks = seq(0,42,2))
pge_bay_chart %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
pge_bay_chart <-
pge_bayzips_date %>%
ggplot() +
geom_bar(
aes(
x = DATE %>% factor(),
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "KBTU",
title = "9 Bay Area Counties Monthly Electric & Gas Usage, 2017-2020",
fill = "Energy Type"
) %>%
scale_x_discrete(breaks = seq(0,42,2))
pge_bay_chart <-
pge_bayzips_date %>%
ggplot() +
geom_bar(
aes(
x = DATE %>% factor(),
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "KBTU",
title = "9 Bay Area Counties Monthly Electric & Gas Usage, 2017-2020",
fill = "Energy Type"
) %>%
scale_x_discrete(breaks = seq(0,42,2))
pge_bay_chart <-
pge_bayzips_date %>%
ggplot() +
geom_bar(
aes(
x = DATE %>% factor(),
y = TOTALKBTU,
fill = CUSTOMERCLASS
),
stat = "identity",
position = "stack"
) +
labs(
x = "Month",
y = "KBTU",
title = "9 Bay Area Counties Monthly Electric & Gas Usage, 2017-2020",
fill = "Energy Type"
) %>%
scale_x_discrete(breaks = seq(0,42,2))
