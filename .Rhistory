labs(
x = "Month",
y = "KBTU",
title = "9 Bay Area Counties Monthly Electric & Gas Usage, 2017-2020",
fill = "Energy Type"
)
pge_bay_chart +
theme(axis.text.x = element_text(angle=90, vjust=0.5, hjust=1))
pge_bay_chart %>%
ggplotly() %>%
layout(
xaxis = list(fixedrange = T),
yaxis = list(fixedrange = T)
) %>%
config(displayModeBar = F)
library(tidyverse)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42)
library(tidyverse)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% (2019:2020), DATE %in% (31:42)
library(tidyverse)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% (2019:2020), DATE %in% (31:42))
library(tidyverse)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
library (dplyr)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42)
View(pge_prepost_covid)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
if(YEAR == 2019){
mutate(KBTU2019 = TOTALKBTU)
} else{
mutate(KBTU2020 = TOTALKBTU)
}
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
mutate(
case_when(
YEAR == 2019 ~ "KBTU2019",
YEAR == 2020 ~ "KBTU2020"
)
)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
if(YEAR == 2019){
mutate(
TOTALKBTU = KBTU2019
)
}
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
if(YEAR %in% 2019){
mutate(
TOTALKBTU = KBTU2019
)
}
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
pivot_wider(
names_from = YEAR
values_from = TOTALKBTU
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_percentchange = ((KBTU2020-KBTU2019)/KBTU2019))*100
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_percentchange = (("KBTU2020"-"KBTU2019")/"KBTU2019"))*100
class(pge_prepost_covid$KBTU2020)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(KBTU_percentchange = ((KBTU2020-KBTU2019)/KBTU2019))*100)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, DATE %in% 31:42) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_percentchange = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_prepost_covid <-
pge_bayzips_date %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_percentchange = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
View(pge_rc_bayzips)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
ungroup() %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_percentchange = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
ungroup() %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
group_by(ZIPCODE, CUSTOMERCLASS, MONTH, YEAR) %>%
ungroup() %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
group_by(ZIPCODE, CUSTOMERCLASS, MONTH, YEAR) %>%
ungroup() %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
group_by(ZIPCODE, CUSTOMERCLASS, MONTH, YEAR) %>%
ungroup() %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
per_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
group_by(ZIPCODE, CUSTOMERCLASS, MONTH, YEAR) %>%
ungroup()
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
group_by(ZIPCODE, CUSTOMERCLASS, MONTH, YEAR) %>%
ungroup() %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
group_by(MONTH) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
per_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
per_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
per_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
per_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = (((KBTU2020 - KBTU2019)/KBTU2019)*100)
)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
library (dplyr)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
) %>%
mutate(
KBTU_change = (((KBTU2020 - KBTU2019)/KBTU2019)*100)
)
pge_prepost_covid <-
pge_rc_bayzips
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
)
View(pge_prepost_covid)
View(pge_prepost_covid)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU_19 = "2019", KBTU_20 = "2020"
) %>%
mutate(
KBTU_change = (((KBTU2020 - KBTU2019)/KBTU2019)*100)
)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
)
View(pge_prepost_covid)
knitr::opts_chunk$set(echo = TRUE)
rm(pge_prepost_covid)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU_19 = "2019", KBTU_20 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100
)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
library (dplyr)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU_19 = "2019", KBTU_20 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100
)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLAS == "Elec-Residential", YEAR %in% 2019:2020, MONTH %in% 1:6)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLAS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
)
View(pge_prepost_covid)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
)
View(pge_prepost_covid)
View(pge_elec_gas)
View(pge_prepost_covid)
View(pge_rc_bayzips)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(sf)
library(tigris)
library(leaflet)
library (dplyr)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU_19 = "2019", KBTU_20 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100
)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU_19 = "2019", KBTU_20 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100
)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU_19 = "2019", KBTU_20 = "2020"
) %>%
mutate(
KBTU_change = ((KBTU2020 - KBTU2019)/KBTU2019)*100
)
rm(pge_prepost_covid)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6)
View(pge_prepost_covid)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
)
View(pge_res_com)
View(pge_rc_bayzips)
View(pge_prepost_covid)
View(pge_prepost_covid)
pge_prepost_covid <-
pge_rc_bayzips %>%
filter(CUSTOMERCLASS == "Elec- Residential", YEAR %in% 2019:2020, MONTH %in% 1:6) %>%
pivot_wider(
names_from = YEAR,
values_from = TOTALKBTU
) %>%
rename(
KBTU2019 = "2019", KBTU2020 = "2020"
)
View(pge_prepost_covid)
View(pge_prepost_covid)
